# はじめに

## 本書の目的

本書の目的は、USDMによる要求記述のため、テレプレゼンスロボット本体のL0要求「走行エリアを検出する」のL1要求分析結果に基づき、HGLCが担当するL1要求に対してL2要求を抽出することである。

## 適用

本要件の適用対象は、テレプレゼンスロボット とする。

## 用語の定義

|用語|説明|
|:---|:---|
|特に無し|---|

## 関連資料

|資料名|説明|
|:---|:---|
|テレプレゼンスロボット要求一覧&USDM.xlsx|本文書の要求分析結果をまとめ、USDMの形式で記述したファイル|
|機能干渉マトリクス.xlsx|本文書の要求分析および今後の仕様化を進める際に検討が必要な機能干渉についてマトリクス表で整理を行ったファイル|
|テレプレゼンスロボット要求分析.docx|テレプレゼンスロボット本体のL0/L1要求分析についての検討過程を記述したファイル|


<div style="page-break-before:always"></div>

# L2要求分析

「走行エリアを検出する」のアクティビティ図を以下に示す。



![](.images/activity/area_detection.png)

上記L0のアクティビティ図のアクション/デシジョン等から導出された胴体部・走行部のL1要求に対するL2要求分析を行う。  
※頭部に対してはavatarin側の責務のため、本書では対象外とする。

<div style="page-break-before:always"></div>

## 頭部は走行部からエリア検出値（内外判定、強度）を受信する

avatarin側の責務のため、対象外とする。

<div style="page-break-before:always"></div>

## 頭部はエリア検出の設定を確認し、エリア検出設定が有効な場合のみエリア検出を行う

avatarin側の責務のため、対象外とする。

<div style="page-break-before:always"></div>

## 頭部はエリア検出値の強度に応じてエリアワイヤに対する減速・停止距離を判断する

avatarin側の責務のため、対象外とする。

<div style="page-break-before:always"></div>

## 頭部は減速距離に近づいたら、それをアバタークラウドに通知する

avatarin側の責務のため、対象外とする。

<div style="page-break-before:always"></div>

## 頭部は減速距離に近づいたら、走行コマンドの速度を制限する

avatarin側の責務のため、対象外とする。

<div style="page-break-before:always"></div>

## 頭部は停止距離に近づいたら、それをアバタークラウドに通知する

avatarin側の責務のため、対象外とする。

<div style="page-break-before:always"></div>

## 頭部は停止距離に近づいたら、走行コマンドの速度を0にする

avatarin側の責務のため、対象外とする。

<div style="page-break-before:always"></div>

## 走行部はエリアワイヤとの間に生じるエリア信号からエリア検出を行いエリア検出値を頭部に送信する

![](.images/activity/area_detection/act01.png)

**L2要求抽出**

|要求|備考|
|:---|:---|
|Miimo Main ECUはエリア信号をavatarcoreへのエリア検出値に変換する|エリア検出値：エリア信号値をCAN通信に則した形態（内外判定・信号強度）に変換したもの|
|エリアセンサはエリアワイヤのアナログ信号値をAD値に変換する||

<div style="page-break-before:always"></div>

## 走行部は頭部からの走行コマンドの速度制限指示にしたがい走行速度を落とす

![](.images/activity/area_detection/act02.png)

**L2要求抽出**

|要求|備考|
|:---|:---|
|Miimo Main ECUは慣性データとコマンドから左右モータ駆動信号に変換する|エリア信号は考慮しない（エリア外への逸脱回避は頭部責務）|
|右走行モータはモータ駆動信号によりモータを駆動する|※1|
|左走行モータはモータ駆動信号によりモータを駆動する|※1|
|IMUは慣性データを取得する||

※1:「遠隔で操作する」＞「ベース操作コマンドに従い走行する」のL2要求参照

<div style="page-break-before:always"></div>

## 走行部は頭部からの走行コマンドの速度0指示にしたがい走行を停止する

![](.images/activity/area_detection/act03.png)

**L2要求抽出**

|要求|備考|
|:---|:---|
|→L2要求としては「走行部は頭部からの走行コマンドの速度制限指示にしたがい走行速度を落とす」の速度=0のケースと同様||
