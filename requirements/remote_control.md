# はじめに

## 本書の目的

本書の目的は、テレプレゼンスロボット本体のL0/L1要求を分析し、USDMによる要求記述のためのL2要求を抽出することである。

## 適用

本要件の適用対象は、テレプレゼンスロボット とする。

## 用語の定義

|用語|説明|
|:---|:---|


以下TODO

<div style="page-break-before:always"></div>

# 遠隔で操作する



![](.images/activity/remote_control.png)


<div style="page-break-before:always"></div>

## 胴体部は首操作指示を受けて、首を動かす

![](.images/activity/remote_control/body-act01.png)

**L2要求抽出**

|要求|備考|
|:---|:---|
|首水平モータは首操作指示を受け取り、動作する|※１|
|首水平モータ駆動中に、別の首操作指示が入力された場合は、その指示に従って動作する|※１|
|首垂直モータは首操作指示を受け取り、動作する|※１|
|首垂直モータ駆動中に、別の首操作指示が入力された場合は、その指示に従って動作する|※１|
※１首操作指示：首操作指示コマンドを現在水平モータ角度、現在垂直モータ角度に展開したもの

<div style="page-break-before:always"></div>

## 走行部は一時停止を解除し外部指示を有効であることを頭部に通知する

![](.images/activity/remote_control/act01.png)


**L2要求抽出**

|要求|備考|
|:---|:---|
|Miimo Main ECUは外部指示有効をアバターコアに通知する||

<div style="page-break-before:always"></div>

## 走行部はベース操作コマンドを実行できる状態であることを確認する

![](.images/activity/remote_control/act02.png)


### コマンドが実行可能かを判定する

![](.images/activity/remote_control/act02-1.png)

**L2要求抽出**

|要求|備考|
|:---|:---|
|Miimo Main ECUは現在の状態を特定する||
|Miimo Main ECUはリリース待ち状態かどうかを判定し、リリース待ち状態の場合、リリースコマンドのみ受け付ける||
|Miimo Main ECUはリリース動作中かどうかを判定し、リリース動作中の場合、キャンセルコマンドのみ受け付ける||
|Miimo Main ECUは動作中かどうかを判定し、動作中状態でない場合、コマンドを破棄する||
|Miimo Main ECUは一時停止中かどうかを判定し、一時停止中状態の場合、コマンドを破棄する||
|Miimo Main ECUはドッキング動作中かどうかを判定し、ドッキング動作中で無い場合、キャンセルコマンドを破棄し、ドッキング動作中の場合、キャンセルコマンドのみ受け付ける||
※１：機能コマンドのキャンセルコマンドは１つの想定
※２：エリア外を検出して前進・後進を抑制するのはアバターコア側の責務の想定

<div style="page-break-before:always"></div>

## 走行部はベース操作コマンドに従い走行する

![](.images/activity/remote_control/act03.png)


**L2要求抽出**

|要求|備考|
|:---|:---|
|Miimo Main ECUは帰還コマンド受け取った場合、動作モードをドッキング動作モードに変更し、エリアセンサ信号から左右走行モータ駆動信号を算出する|※１※２|
|Miimo Main ECUはリリースコマンドを受け取った場合、動作モードをリリース動作モードに変更し、エリアセンサ信号から左右走行モータ駆動信号を算出する|※１※２|
|Miimo Main ECUはキャンセルコマンドを受け取った場合、動作モードをドッキング/リリース動作モードを解除する|※１|
|Miimo Main ECUは走行操作コマンドを受け付けた場合、左右走行モータへのモータ駆動信号に変換する|※３|
|右走行モータはモータ駆動信号を受け取り動作する||
|右走行モータ駆動中に別のモータ駆動信号が入力された場合、その信号に従って動作する||
|左走行モータはモータ駆動信号を受け取り動作する||
|左走行モータ駆動中に別のモータ駆動信号が入力された場合、その信号に従って動作する||
※１：機能コマンドはアバターコア側で要求モードに変換したものを受け取る想定
※２：充電ステーション近傍での自動運転を想定
※３：走行操作コマンドはアバターコア側で併進速度とヨーレート指令に変換したものを受け取る想定
